import logging
import sys
import torch
sys.append("..")
from src.exception import CustomException
from src.components.t5.model import t5

def main():
    sumario_list = ['I - A anulação da partilha, prevista e regulada no artigo 1127 do Código de Processo Civil, visa produzir um efeito constitutivo, relativamente ao próprio ato de partilha, destruindo-o e aniquilando os respetivos efeitos, ao afetar irremediavelmente a sua validade; daí que, por evidentes razões de segurança jurídica - reforçadas por estarmos perante um ato coberto pela força do caso julgado, associado à sentença homologatória da partilha -, tal anulação só tenha cabimento nas situações definidas de forma taxativa na lei, sendo, nessa medida, insuscetíveis de extensão analógica. II - Assim, de acordo com o citado normativo, a partilha confirmada por sentença transitada em julgado, somente pode ser anulada quando tenha havido preterição ou falta de intervenção de algum dos co-herdeiros e se mostre que os outros interessados procederam com dolo ou má-fé, seja quanto à preterição, seja quanto ao modo como a partilha foi preparada. III - Dá-se a preterição, quando o cabeça de casal deixe de indicar como herdeiro alguém que tem essa qualidade, ocorrendo a falta de intervenção quando, posteriormente às declarações do cabeça-de-casal - mas ainda antes do trânsito em julgado da sentença homologatória da partilha -, alguém adquire a qualidade de herdeiro e não chega a intervir no processo de inventário. IV - Os poderes e deveres emergentes da filiação só são atendíveis depois do estabelecimento voluntário ou judicial do vínculo - rectius, depois da inscrição desse facto no registo civil. V - No entanto, o legislador, no artigo 1797 do Código Civil, aceitou o caráter simplesmente declarativo e não constitutivo) do estabelecimento dessa filiação, razão pela qual se considera que a filiação jurídica recua ao tempo em que começa a filiação biológica. VI - Essa eficácia retroativa não é, contudo, absoluta, existindo razões de vária ordem que justificam o estabelecimento de limites a essa retroação, mormente para proteção da confiança e da segurança jurídica dos cidadãos, defendendo-os contra o perigo de se ver atribuir aos seus atos passados ou às situações transatas efeitos jurídicos com que não podiam razoavelmente contar. VII - Deste modo, na hipótese de a filiação ser legalmente) estabelecida já após o terminus do inventário – o que determina que o herdeiro não adquiriu esta qualidade a tempo de participar na divisão hereditária – não há lugar à anulação da partilha aí realizada por preterição ou falta de intervenção desse herdeiro, assistindo-lhe, todavia, o direito à composição da sua quota hereditária em processo a intentar contra os demais herdeiros do seu progenitor.',
    '"I - O direito de sub-rogação invocado pela seguradora, fundado num alegado contrato de seguro de crédito celebrado com o credor de uma obrigação pecuniária, transmite àquela o direito de crédito de que era titular o credor originário, no caso de se verificarem os respectivos pressupostos. II - Nessa medida, transmitindo-se à seguradora, por força do direito de sub-rogação, a titularidade da alegada obrigação pecuniária directamente emergente do contrato celebrado pelo segurado com o devedor, tem aquela legitimidade para poder socorrer-se do procedimento de injunção para obter a condenação do devedor a reconhecer e a satisfazer aquele crédito.']

    text_list = ['Processo n 4787/08.4TBGDM-B.P1 Origem: Tribunal Judicial da Comarca do Porto, Gondomar – Juízo Local Cível, Juiz 3 Relator: Miguel Baldaia Morais  1 Adjunto Des. ',
    'APELAÇÃO N 70103/19.0YIPRT.P1  Sumário  elaborado pelo Relator- art. 663, n 7 do CPC ):  ........... ........... ...........  Comarca do Porto- Juízo Local Cível de Gondomar - Juiz 2  Acordam os Juízes do Tribunal da Relação do Porto.  I. RELATÓRIO. Recorrente: X... - Companhia de seguro de crédito, S. A.; Recorrida: AA; Inconformada com a decisão proferida pelo tribunal recorrido que julgou procedente a excepção dilatória inominada de uso indevido do procedimento de injunção, veio a recorrente interpor o presente recurso, apresentando as seguintes conclusões: "CONCLUSÕES: 1. A recorrente não se conforma com a sentença proferida nos presentes autos.  2. Isto pois, a Recorrente, com o requerimento de injunção apresentado, visou o cumprimento de obrigações pecuniárias emergentes de contrato celebrado pela Ré com o Segurado da Autora, de valor não superior a euro) 15.000, tendo sido esta a forma e a razão em que fundamentou o seu pedido.  3. Tendo alegado que a Ré - no âmbito de um contrato de fornecimento de bens ou serviços - havia encomendado, comprado e recebido da Segurada da Autora os bens constantes das facturas que indica no requerimento de injunção, pelo valor ali mencionado, ficando parte por pagar.  4. Bem como, alegado que se encontrava sub-rogada no valor em dívida - uma vez que havia entregue à sua Segurada parte do valor que a Ré não pagou, motivo pelo qual tem legitimidade para a instauração da presente acção, por lhe ter sido transmitida a posição contratual do seu Segurado, nomeadamente, a parte do crédito que neste processo pretende cobrar.  5. Motivo pelo qual a Recorrente entende que se verificam os pressupostos para a utilização do procedimento de injunção, não existe qualquer erro na forma de processo ou excepção dilatória inominada que obste ao conhecimento do mérito da acção ). Pede a procedência do recurso.Foram apresentadas contra-alegações, tendo a recorrida apresentado as seguintes conclusões: "CONCLUSÕES ) C. Da factualidade configurada pela Autora/Recorrente no requerimento de injunção, resulta que não existe qualquer transacção comercial entre Autora/Recorrente e Ré/Recorrida, como também não existe qualquer contrato entre ambas as partes; D. Acresce, ainda, que a Segurada da Autora/Recorrente - C..., S.A. – interpôs, em 22/02/2021 - procedimento de Injunção contra a aqui Ré/Recorrida - Injunção n. 15114/21.5YIPRT - peticionando o pagamento de valores insertos nas mesmas facturas que a Autora/Recorrente pretende cobrar nos presentes autos, não fazendo referência a ter recebido qualquer indemnização por parte da Autora/Recorrente; E. Veja-se que na defesa apresentada pela Ré/Recorrida na sua Oposição, aquela em momento algum reconheceu que devesse, fosse o que fosse à Segurada da Autora/Recorrente, antes alegou que todos os pagamentos devidos à Segurada foram devidamente garantidos e efectuados por cheques e letras, estando sempre convencida de que tinha e tem a sua situação, devidamente, regularizada com a C..., S.A; F. A Ré/Recorrida nenhum conhecimento tinha do alegado contrato de Seguro, até ter sido notificada da presente injunção; nem tão pouco, qualquer conhecimento lhe foi dado que a Autora/Recorrente havia pago uma indemnização à C..., S.A, relativa a alegada falta de pagamento por parte da Ré/Recorrida; G. Ao demais, a Autora/Recorrente faz alusão a várias facturas no seu Requerimento de Injunção, mas não faz corresponder o seu alegado crédito a nenhuma das mesmas, em concreto; H. Deste modo, entendemos que a celeridade que exige o procedimento de injunção, que é uma forma de cobrar dívidas simples, esbarra com a morosidade que a complexidade da questão em causa nos presentes autos necessita para ser devidamente conhecida e julgada; I. Veja-se que não estamos perante uma mera obrigação pecuniária de pagamento, mas antes perante o alegado cumprimento ou incumprimento do programa contratual acordado entre a aqui Ré/Recorrida e um terceiro - C..., S.A., que nem sequer é parte em juízo, e nem sequer pode ser chamada nos presentes autos, atendendo a acção especial em causa; J. Não existe qualquer reconhecimento de dívida, por parte da Ré/Recorrida, nem nenhuma comunicação efectuada à mesma, no sentido de apurar se aquela era ou não efectivamente devedora de quaisquer quantias à Segurada da Autora/Recorrente; K. Assim, o procedimento de injunção não reveste a forma de processo apropriada para a Autora/Recorrente exercer o seu alegado direito em juízo, ou seja, de se ver ressarcida de uma indemnização que, alegadamente, pagou a um terceiro, que não é parte neste processo, e que a este não pode ser chamado; nos presentes autos temos uma situação de substituição da Autora/Recorrente ao alegado "credor���, sem ter sido discutida, previamente, qualquer existência de contrato entre o Terceiro e a Ré/Recorrida, e qualquer incumprimento do mesmo; L. Leia-se o Acórdão da Relação de Lisboa de 05/02/2019 in www.dgsi.pt), por se tratar de situação análoga; M. Assim, tratando os presentes autos de questão complexa, que exigiria a intervenção do terceiro como parte na presente acção, pois que não existe qualquer decisão judicial de incumprimento, declaração ou acordo, anterior nesse sentido, e que reconheça o direito de que a Autora/Recorrente se arroga, N. Entendemos que bem andou o Tribunal a quo ao conhecer e julgar procedente a invocada excepção dilatória inominada, uma vez que o procedimento de injunção não é o meio apropriado para a Autora/Recorrente ver reconhecida a sua pretensão, absolvendo a Ré/Recorrida da instância, nos termos do disposto no artigo 576 e 577 do CPC; O. Pelo que a douta sentença recorrida não violou os artigos 576, 577, 592 e 593 do Código Civil; P. Deste modo, o recurso interposto pela Autora/Recorrente deverá ser julgado totalmente improcedente, confirmando-se a douta sentença recorrida. Termos em que REQUER a V. Exas. se dignem julgar o recurso improcedente, confirmando a douta sentença recorrida .Colhidos os vistos legais, cumpre decidir.II- FUNDAMENTOS  O objecto do recurso é delimitado pelas conclusões da alegação dos) recorrentes), não podendo este Tribunal conhecer de matérias nelas não incluídas, a não ser que as mesmas sejam de conhecimento oficioso - cfr. artigos 635., n 4, e 639., ns 1 e 2, do CPC.No seguimento desta orientação, a recorrente coloca a seguinte questão que importa apreciar: - Saber se, contrariamente ao decidido, não se verifica a excepção dilatória inominada invocada pelo tribunal recorrido.A) - FUNDAMENTAÇÃO DE FACTOComo factualidade relevante interessa aqui ponderar apenas os trâmites processuais seguidos e o teor da decisão proferida que aqui se dá por reproduzida para todos os efeitos legais. ") Da excepção dilatória inominada de uso indevido do procedimento de injunção: O requerimento de injunção é um processo célere para exigir o cumprimento de obrigações pecuniárias emergentes de transacções comerciais ou emergentes de contratos de valor não superior a 15.000,00 euros. Sucede que na factualidade configurada pela Requerente, não só não existe qu']

    try:
        t5_model = t5("unicamp-dl/ptt5-base-portuguese-vocab")
        input_ids, attention_mask, labels = t5_model.encode_data_for_training_task(text_list, sumario_list)
        t5_model.train_model(input_ids, attention_mask, labels, torch.optim.Adam(t5_model.model.parameters(), lr=1e-4), 4)
    except Exception as e:
        logging.info("Problem with t5 model training")
        raise CustomException(e, sys)

if __name__=="__main__":
    main()
